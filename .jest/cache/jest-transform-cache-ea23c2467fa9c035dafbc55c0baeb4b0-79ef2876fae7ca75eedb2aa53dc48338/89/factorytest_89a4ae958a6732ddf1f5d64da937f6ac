ea11021bd88e13abb0f53c0528edbdae
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const index_1 = require("../src/index");
describe('工厂函数测试', () => {
    beforeEach(() => {
        // 重置所有模拟
        jest.clearAllMocks();
        // 保存并模拟全局对象
        jest.spyOn(window, 'setTimeout').mockImplementation(() => 1);
        jest.spyOn(window, 'clearTimeout').mockImplementation(() => { });
    });
    afterEach(() => {
        // 恢复原始方法
        jest.restoreAllMocks();
    });
    test('createUpdateNotifier使用null作为pollingInterval', () => {
        const notifier = (0, index_1.createUpdateNotifier)({ pollingInterval: null });
        expect(notifier).toBeDefined();
        // 在null模式下不应该启动自动轮询
        expect(setTimeout).not.toHaveBeenCalled();
    });
    test('createUpdateNotifier配置不同的轮询间隔', () => {
        const customInterval = 30000;
        const notifier = (0, index_1.createUpdateNotifier)({ pollingInterval: customInterval });
        expect(notifier).toBeDefined();
        expect(setTimeout).toHaveBeenCalled();
    });
    test('createUpdateNotifier配置自定义indexPath', () => {
        const customPath = '/custom-index.html';
        const notifier = (0, index_1.createUpdateNotifier)({ indexPath: customPath });
        expect(notifier).toBeDefined();
    });
    test('createUpdateNotifier配置自定义scriptRegex', () => {
        const customRegex = /<script.*src=["'](?<src>[^"']+)/gm;
        const notifier = (0, index_1.createUpdateNotifier)({ scriptRegex: customRegex });
        expect(notifier).toBeDefined();
    });
    test('createUpdateNotifier配置自定义提示消息', () => {
        const customMessage = '新版本已发布，是否立即更新？';
        const notifier = (0, index_1.createUpdateNotifier)({ promptMessage: customMessage });
        expect(notifier).toBeDefined();
    });
    test('createUpdateNotifier设置immediate为false', () => {
        const notifier = (0, index_1.createUpdateNotifier)({ immediate: false });
        expect(notifier).toBeDefined();
        // immediate为false时不应立即启动轮询
        expect(setTimeout).not.toHaveBeenCalled();
    });
    test('createUpdateNotifier设置pauseOnHidden为false', () => {
        const notifier = (0, index_1.createUpdateNotifier)({ pauseOnHidden: false });
        expect(notifier).toBeDefined();
        // 检查是否没有添加visibilitychange事件监听器
        expect(document.addEventListener).not.toHaveBeenCalledWith('visibilitychange', expect.any(Function));
    });
});
describe('边界情况测试', () => {
    beforeEach(() => {
        jest.spyOn(window, 'setTimeout').mockImplementation(() => 1);
        jest.spyOn(window, 'clearTimeout').mockImplementation(() => { });
    });
    afterEach(() => {
        jest.restoreAllMocks();
    });
    test('重复调用start方法', () => {
        const notifier = (0, index_1.createUpdateNotifier)();
        // 第一次调用start
        jest.clearAllMocks();
        notifier.start();
        // 第二次调用start
        const secondCall = () => notifier.start();
        expect(secondCall).not.toThrow();
    });
    test('重复调用stop方法', () => {
        const notifier = (0, index_1.createUpdateNotifier)();
        // 第一次调用stop
        notifier.stop();
        // 第二次调用stop
        const secondCall = () => notifier.stop();
        expect(secondCall).not.toThrow();
    });
    test('stop后再start', () => {
        const notifier = (0, index_1.createUpdateNotifier)();
        notifier.stop();
        jest.clearAllMocks();
        notifier.start();
        expect(setTimeout).toHaveBeenCalled();
    });
    test('设置非常大的轮询间隔', () => {
        const veryLargeInterval = Number.MAX_SAFE_INTEGER;
        const notifier = (0, index_1.createUpdateNotifier)({ pollingInterval: veryLargeInterval });
        expect(notifier).toBeDefined();
    });
    test('设置为负数的轮询间隔（应使用默认值）', () => {
        const notifier = (0, index_1.createUpdateNotifier)({ pollingInterval: -1000 });
        expect(notifier).toBeDefined();
        expect(setTimeout).toHaveBeenCalled();
    });
});
describe('异步回调测试', () => {
    let notifier;
    beforeEach(() => {
        jest.spyOn(window, 'setTimeout').mockImplementation(() => 1);
        jest.spyOn(window, 'clearTimeout').mockImplementation(() => { });
        notifier = (0, index_1.createUpdateNotifier)({ pollingInterval: 0 });
    });
    afterEach(() => {
        jest.restoreAllMocks();
    });
    test('异步onUpdate回调返回true', async () => {
        const mockOnUpdate = jest.fn().mockResolvedValue(true);
        // 模拟fetch返回的HTML内容，以便能检测到更新
        jest.spyOn(globalThis, 'fetch').mockResolvedValue({
            text: jest.fn().mockResolvedValue('<html><script src="/test.123.js"></script></html>')
        });
        const notifier = (0, index_1.createUpdateNotifier)({
            pollingInterval: 0,
            notifyType: 'custom',
            onUpdate: mockOnUpdate
        });
        // 模拟location.reload
        const reloadSpy = jest.spyOn(window.location, 'reload').mockImplementation(() => { });
        // 第一次调用不会触发更新（初始化）
        await notifier.checkNow();
        // 模拟新的script内容
        jest.spyOn(globalThis, 'fetch').mockResolvedValue({
            text: jest.fn().mockResolvedValue('<html><script src="/test.456.js"></script></html>')
        });
        await notifier.checkUpdate();
        expect(mockOnUpdate).toHaveBeenCalled();
    });
    test('异步onUpdate回调返回false', async () => {
        const mockOnUpdate = jest.fn().mockResolvedValue(false);
        // 模拟fetch返回的HTML内容，以便能检测到更新
        jest.spyOn(globalThis, 'fetch').mockResolvedValue({
            text: jest.fn().mockResolvedValue('<html><script src="/test.123.js"></script></html>')
        });
        const notifier = (0, index_1.createUpdateNotifier)({
            pollingInterval: 0,
            notifyType: 'custom',
            onUpdate: mockOnUpdate
        });
        // 模拟location.reload
        const reloadSpy = jest.spyOn(window.location, 'reload').mockImplementation(() => { });
        // 第一次调用不会触发更新（初始化）
        await notifier.checkNow();
        // 模拟新的script内容
        jest.spyOn(globalThis, 'fetch').mockResolvedValue({
            text: jest.fn().mockResolvedValue('<html><script src="/test.456.js"></script></html>')
        });
        await notifier.checkUpdate();
        expect(mockOnUpdate).toHaveBeenCalled();
        expect(reloadSpy).not.toHaveBeenCalled();
    });
    test('onDetected回调被正确调用', async () => {
        const mockOnDetected = jest.fn();
        // 模拟fetch返回的HTML内容，以便能检测到更新
        jest.spyOn(globalThis, 'fetch').mockResolvedValue({
            text: jest.fn().mockResolvedValue('<html><script src="/test.123.js"></script></html>')
        });
        const notifier = (0, index_1.createUpdateNotifier)({
            pollingInterval: 0,
            onDetected: mockOnDetected
        });
        // 第一次调用不会触发更新（初始化）
        await notifier.checkNow();
        // 模拟新的script内容
        jest.spyOn(globalThis, 'fetch').mockResolvedValue({
            text: jest.fn().mockResolvedValue('<html><script src="/test.456.js"></script></html>')
        });
        await notifier.checkUpdate();
        expect(mockOnDetected).toHaveBeenCalled();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL1NoYXJlZC9QcmV2aW91c2x5IFJlbG9jYXRlZCBJdGVtcy9TZWN1cml0eS9teVByb2ppZWN0L2FpX3Byb2pldC90ZXN0cy9mYWN0b3J5LnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSx3Q0FBb0Q7QUFFcEQsUUFBUSxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUU7SUFDdEIsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLFNBQVM7UUFDVCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFFckIsWUFBWTtRQUNaLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdELElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLGNBQWMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxHQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ2xFLENBQUMsQ0FBQyxDQUFDO0lBRUgsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNiLFNBQVM7UUFDVCxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDekIsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsNkNBQTZDLEVBQUUsR0FBRyxFQUFFO1FBQ3ZELE1BQU0sUUFBUSxHQUFHLElBQUEsNEJBQW9CLEVBQUMsRUFBRSxlQUFlLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUVqRSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDL0Isb0JBQW9CO1FBQ3BCLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUM1QyxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQywrQkFBK0IsRUFBRSxHQUFHLEVBQUU7UUFDekMsTUFBTSxjQUFjLEdBQUcsS0FBSyxDQUFDO1FBQzdCLE1BQU0sUUFBUSxHQUFHLElBQUEsNEJBQW9CLEVBQUMsRUFBRSxlQUFlLEVB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LENBQUM7WUFDbEIsVUFBVSxFQUFFLGNBQWM7U0FDM0IsQ0FBQyxDQUFDO1FBRUgsbUJBQW1CO1FBQ25CLE1BQU0sUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBRTFCLGVBQWU7UUFDZixJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQztZQUNoRCxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLG1EQUFtRCxDQUFDO1NBQ3ZGLENBQUMsQ0FBQztRQUVILE1BQU0sUUFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBRTdCLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzVDLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL1NoYXJlZC9QcmV2aW91c2x5IFJlbG9jYXRlZCBJdGVtcy9TZWN1cml0eS9teVByb2ppZWN0L2FpX3Byb2pldC90ZXN0cy9mYWN0b3J5LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlVXBkYXRlTm90aWZpZXIgfSBmcm9tICcuLi9zcmMvaW5kZXgnO1xuXG5kZXNjcmliZSgn5bel5Y6C5Ye95pWw5rWL6K+VJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyDph43nva7miYDmnInmqKHmi59cbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBcbiAgICAvLyDkv53lrZjlubbmqKHmi5/lhajlsYDlr7nosaFcbiAgICBqZXN0LnNweU9uKHdpbmRvdywgJ3NldFRpbWVvdXQnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gMSk7XG4gICAgamVzdC5zcHlPbih3aW5kb3csICdjbGVhclRpbWVvdXQnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuICB9KTtcbiAgXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgLy8g5oGi5aSN5Y6f5aeL5pa55rOVXG4gICAgamVzdC5yZXN0b3JlQWxsTW9ja3MoKTtcbiAgfSk7XG4gIFxuICB0ZXN0KCdjcmVhdGVVcGRhdGVOb3RpZmllcuS9v+eUqG51bGzkvZzkuLpwb2xsaW5nSW50ZXJ2YWwnLCAoKSA9PiB7XG4gICAgY29uc3Qgbm90aWZpZXIgPSBjcmVhdGVVcGRhdGVOb3RpZmllcih7IHBvbGxpbmdJbnRlcnZhbDogbnVsbCB9KTtcbiAgICBcbiAgICBleHBlY3Qobm90aWZpZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgLy8g5ZyobnVsbOaooeW8j+S4i+S4jeW6lOivpeWQr+WKqOiHquWKqOi9ruivolxuICAgIGV4cGVjdChzZXRUaW1lb3V0KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcbiAgXG4gIHRlc3QoJ2NyZWF0ZVVwZGF0ZU5vdGlmaWVy6YWN572u5LiN5ZCM55qE6L2u6K+i6Ze06ZqUJywgKCkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbUludGVydmFsID0gMzAwMDA7XG4gICAgY29uc3Qgbm90aWZpZXIgPSBjcmVhdGVVcGRhdGVOb3RpZmllcih7IHBvbGxpbmdJbnRlcnZhbDogY3VzdG9tSW50ZXJ2YWwgfSk7XG4gICAgXG4gICAgZXhwZWN0KG5vdGlmaWVyKS50b0JlRGVmaW5lZCgpO1xuICAgIGV4cGVjdChzZXRUaW1lb3V0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuICBcbiAgdGVzdCgnY3JlYXRlVXBkYXRlTm90aWZpZXLphY3nva7oh6rlrprkuYlpbmRleFBhdGgnLCAoKSA9PiB7XG4gICAgY29uc3QgY3VzdG9tUGF0aCA9ICcvY3VzdG9tLWluZGV4Lmh0bWwnO1xuICAgIGNvbnN0IG5vdGlmaWVyID0gY3JlYXRlVXBkYXRlTm90aWZpZXIoeyBpbmRleFBhdGg6IGN1c3RvbVBhdGggfSk7XG4gICAgXG4gICAgZXhwZWN0KG5vdGlmaWVyKS50b0JlRGVmaW5lZCgpO1xuICB9KTtcbiAgXG4gIHRlc3QoJ2NyZWF0ZVVwZGF0ZU5vdGlmaWVy6YWN572u6Ieq5a6a5LmJc2NyaXB0UmVnZXgnLCAoKSA9PiB7XG4gICAgY29uc3QgY3VzdG9tUmVnZXggPSAvPHNjcmlwdC4qc3JjPVtcIiddKD88c3JjPlteXCInXSspL2dtO1xuICAgIGNvbnN0IG5vdGlmaWVyID0gY3JlYXRlVXBkYXRlTm90aWZpZXIoeyBzY3JpcHRSZWdleDogY3VzdG9tUmVnZXggfSk7XG4gICAgXG4gICAgZXhwZWN0KG5vdGlmaWVyKS50b0JlRGVmaW5lZCgpO1xuICB9KTtcbiAgXG4gIHRlc3QoJ2NyZWF0ZVVwZGF0ZU5vdGlmaWVy6YWN572u6Ieq5a6a5LmJ5o+Q56S65raI5oGvJywgKCkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbU1lc3NhZ2UgPSAn5paw54mI5pys5bey5Y+R5biD77yM5piv5ZCm56uL5Y2z5pu05paw77yfJztcbiAgICBjb25zdCBub3RpZmllciA9IGNyZWF0ZVVwZGF0ZU5vdGlmaWVyKHsgcHJvbXB0TWVzc2FnZTogY3VzdG9tTWVzc2FnZSB9KTtcbiAgICBcbiAgICBleHBlY3Qobm90aWZpZXIpLnRvQmVEZWZpbmVkKCk7XG4gIH0pO1xuICBcbiAgdGVzdCgnY3JlYXRlVXBkYXRlTm90aWZpZXLorr7nva5pbW1lZGlhdGXkuLpmYWxzZScsICgpID0+IHtcbiAgICBjb25zdCBub3RpZmllciA9IGNyZWF0ZVVwZGF0ZU5vdGlmaWVyKHsgaW1tZWRpYXRlOiBmYWxzZSB9KTtcbiAgICBcbiAgICBleHBlY3Qobm90aWZpZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgLy8gaW1tZWRpYXRl5Li6ZmFsc2Xml7bkuI3lupTnq4vljbPlkK/liqjova7or6JcbiAgICBleHBlY3Qoc2V0VGltZW91dCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG4gIFxuICB0ZXN0KCdjcmVhdGVVcGRhdGVOb3RpZmllcuiuvue9rnBhdXNlT25IaWRkZW7kuLpmYWxzZScsICgpID0+IHtcbiAgICBjb25zdCBub3RpZmllciA9IGNyZWF0ZVVwZGF0ZU5vdGlmaWVyKHsgcGF1c2VPbkhpZGRlbjogZmFsc2UgfSk7XG4gICAgXG4gICAgZXhwZWN0KG5vdGlmaWVyKS50b0JlRGVmaW5lZCgpO1xuICAgIC8vIOajgOafpeaYr+WQpuayoeaciea3u+WKoHZpc2liaWxpdHljaGFuZ2Xkuovku7bnm5HlkKzlmahcbiAgICBleHBlY3QoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikubm90LnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd2aXNpYmlsaXR5Y2hhbmdlJywgZXhwZWN0LmFueShGdW5jdGlvbikpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgn6L6555WM5oOF5Ya15rWL6K+VJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LnNweU9uKHdpbmRvdywgJ3NldFRpbWVvdXQnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gMSk7XG4gICAgamVzdC5zcHlPbih3aW5kb3csICdjbGVhclRpbWVvdXQnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuICB9KTtcbiAgXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5yZXN0b3JlQWxsTW9ja3MoKTtcbiAgfSk7XG4gIFxuICB0ZXN0KCfph43lpI3osIPnlKhzdGFydOaWueazlScsICgpID0+IHtcbiAgICBjb25zdCBub3RpZmllciA9IGNyZWF0ZVVwZGF0ZU5vdGlmaWVyKCk7XG4gICAgXG4gICAgLy8g56ys5LiA5qyh6LCD55Soc3RhcnRcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBub3RpZmllci5zdGFydCgpO1xuICAgIFxuICAgIC8vIOesrOS6jOasoeiwg+eUqHN0YXJ0XG4gICAgY29uc3Qgc2Vjb25kQ2FsbCA9ICgpID0+IG5vdGlmaWVyLnN0YXJ0KCk7XG4gICAgZXhwZWN0KHNlY29uZENhbGwpLm5vdC50b1Rocm93KCk7XG4gIH0pO1xuICBcbiAgdGVzdCgn6YeN5aSN6LCD55Soc3RvcOaWueazlScsICgpID0+IHtcbiAgICBjb25zdCBub3RpZmllciA9IGNyZWF0ZVVwZGF0ZU5vdGlmaWVyKCk7XG4gICAgXG4gICAgLy8g56ys5LiA5qyh6LCD55Soc3RvcFxuICAgIG5vdGlmaWVyLnN0b3AoKTtcbiAgICBcbiAgICAvLyDnrKzkuozmrKHosIPnlKhzdG9wXG4gICAgY29uc3Qgc2Vjb25kQ2FsbCA9ICgpID0+IG5vdGlmaWVyLnN0b3AoKTtcbiAgICBleHBlY3Qoc2Vjb25kQ2FsbCkubm90LnRvVGhyb3coKTtcbiAgfSk7XG4gIFxuICB0ZXN0KCdzdG9w5ZCO5YaNc3RhcnQnLCAoKSA9PiB7XG4gICAgY29uc3Qgbm90aWZpZXIgPSBjcmVhdGVVcGRhdGVOb3RpZmllcigpO1xuICAgIFxuICAgIG5vdGlmaWVyLnN0b3AoKTtcbiAgICBcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBub3RpZmllci5zdGFydCgpO1xuICAgIFxuICAgIGV4cGVjdChzZXRUaW1lb3V0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuICBcbiAgdGVzdCgn6K6+572u6Z2e5bi45aSn55qE6L2u6K+i6Ze06ZqUJywgKCkgPT4ge1xuICAgIGNvbnN0IHZlcnlMYXJnZUludGVydmFsID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG4gICAgY29uc3Qgbm90aWZpZXIgPSBjcmVhdGVVcGRhdGVOb3RpZmllcih7IHBvbGxpbmdJbnRlcnZhbDogdmVyeUxhcmdlSW50ZXJ2YWwgfSk7XG4gICAgXG4gICAgZXhwZWN0KG5vdGlmaWVyKS50b0JlRGVmaW5lZCgpO1xuICB9KTtcbiAgXG4gIHRlc3QoJ+iuvue9ruS4uui0n+aVsOeahOi9ruivoumXtOmalO+8iOW6lOS9v+eUqOm7mOiupOWAvO+8iScsICgpID0+IHtcbiAgICBjb25zdCBub3RpZmllciA9IGNyZWF0ZVVwZGF0ZU5vdGlmaWVyKHsgcG9sbGluZ0ludGVydmFsOiAtMTAwMCB9KTtcbiAgICBcbiAgICBleHBlY3Qobm90aWZpZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHNldFRpbWVvdXQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ+W8guatpeWbnuiwg+a1i+ivlScsICgpID0+IHtcbiAgbGV0IG5vdGlmaWVyOiBhbnk7XG4gIFxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LnNweU9uKHdpbmRvdywgJ3NldFRpbWVvdXQnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gMSk7XG4gICAgamVzdC5zcHlPbih3aW5kb3csICdjbGVhclRpbWVvdXQnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuICAgIFxuICAgIG5vdGlmaWVyID0gY3JlYXRlVXBkYXRlTm90aWZpZXIoeyBwb2xsaW5nSW50ZXJ2YWw6IDAgfSk7XG4gIH0pO1xuICBcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpO1xuICB9KTtcbiAgXG4gIHRlc3QoJ+W8guatpW9uVXBkYXRl5Zue6LCD6L+U5ZuedHJ1ZScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2NrT25VcGRhdGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG4gICAgXG4gICAgLy8g5qih5oufZmV0Y2jov5Tlm57nmoRIVE1M5YaF5a6577yM5Lul5L6/6IO95qOA5rWL5Yiw5pu05pawXG4gICAgamVzdC5zcHlPbihnbG9iYWxUaGlzLCAnZmV0Y2gnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB0ZXh0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJzxodG1sPjxzY3JpcHQgc3JjPVwiL3Rlc3QuMTIzLmpzXCI+PC9zY3JpcHQ+PC9odG1sPicpXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3Qgbm90aWZpZXIgPSBjcmVhdGVVcGRhdGVOb3RpZmllcih7XG4gICAgICBwb2xsaW5nSW50ZXJ2YWw6IDAsXG4gICAgICBub3RpZnlUeXBlOiAnY3VzdG9tJyxcbiAgICAgIG9uVXBkYXRlOiBtb2NrT25VcGRhdGVcbiAgICB9KTtcbiAgICBcbiAgICAvLyDmqKHmi59sb2NhdGlvbi5yZWxvYWRcbiAgICBjb25zdCByZWxvYWRTcHkgPSBqZXN0LnNweU9uKHdpbmRvdy5sb2NhdGlvbiwgJ3JlbG9hZCcpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XG4gICAgXG4gICAgLy8g56ys5LiA5qyh6LCD55So5LiN5Lya6Kem5Y+R5pu05paw77yI5Yid5aeL5YyW77yJXG4gICAgYXdhaXQgbm90aWZpZXIuY2hlY2tOb3coKTtcbiAgICBcbiAgICAvLyDmqKHmi5/mlrDnmoRzY3JpcHTlhoXlrrlcbiAgICBqZXN0LnNweU9uKGdsb2JhbFRoaXMsICdmZXRjaCcpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIHRleHQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnPGh0bWw+PHNjcmlwdCBzcmM9XCIvdGVzdC40NTYuanNcIj48L3NjcmlwdD48L2h0bWw+JylcbiAgICB9KTtcbiAgICBcbiAgICBhd2FpdCBub3RpZmllci5jaGVja1VwZGF0ZSgpO1xuICAgIFxuICAgIGV4cGVjdChtb2NrT25VcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG4gIFxuICB0ZXN0KCflvILmraVvblVwZGF0ZeWbnuiwg+i/lOWbnmZhbHNlJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tPblVwZGF0ZSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShmYWxzZSk7XG4gICAgXG4gICAgLy8g5qih5oufZmV0Y2jov5Tlm57nmoRIVE1M5YaF5a6577yM5Lul5L6/6IO95qOA5rWL5Yiw5pu05pawXG4gICAgamVzdC5zcHlPbihnbG9iYWxUaGlzLCAnZmV0Y2gnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB0ZXh0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJzxodG1sPjxzY3JpcHQgc3JjPVwiL3Rlc3QuMTIzLmpzXCI+PC9zY3JpcHQ+PC9odG1sPicpXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3Qgbm90aWZpZXIgPSBjcmVhdGVVcGRhdGVOb3RpZmllcih7XG4gICAgICBwb2xsaW5nSW50ZXJ2YWw6IDAsXG4gICAgICBub3RpZnlUeXBlOiAnY3VzdG9tJyxcbiAgICAgIG9uVXBkYXRlOiBtb2NrT25VcGRhdGVcbiAgICB9KTtcbiAgICBcbiAgICAvLyDmqKHmi59sb2NhdGlvbi5yZWxvYWRcbiAgICBjb25zdCByZWxvYWRTcHkgPSBqZXN0LnNweU9uKHdpbmRvdy5sb2NhdGlvbiwgJ3JlbG9hZCcpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XG4gICAgXG4gICAgLy8g56ys5LiA5qyh6LCD55So5LiN5Lya6Kem5Y+R5pu05paw77yI5Yid5aeL5YyW77yJXG4gICAgYXdhaXQgbm90aWZpZXIuY2hlY2tOb3coKTtcbiAgICBcbiAgICAvLyDmqKHmi5/mlrDnmoRzY3JpcHTlhoXlrrlcbiAgICBqZXN0LnNweU9uKGdsb2JhbFRoaXMsICdmZXRjaCcpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIHRleHQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnPGh0bWw+PHNjcmlwdCBzcmM9XCIvdGVzdC40NTYuanNcIj48L3NjcmlwdD48L2h0bWw+JylcbiAgICB9KTtcbiAgICBcbiAgICBhd2FpdCBub3RpZmllci5jaGVja1VwZGF0ZSgpO1xuICAgIFxuICAgIGV4cGVjdChtb2NrT25VcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICBleHBlY3QocmVsb2FkU3B5KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcbiAgXG4gIHRlc3QoJ29uRGV0ZWN0ZWTlm57osIPooqvmraPnoa7osIPnlKgnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja09uRGV0ZWN0ZWQgPSBqZXN0LmZuKCk7XG4gICAgXG4gICAgLy8g5qih5oufZmV0Y2jov5Tlm57nmoRIVE1M5YaF5a6577yM5Lul5L6/6IO95qOA5rWL5Yiw5pu05pawXG4gICAgamVzdC5zcHlPbihnbG9iYWxUaGlzLCAnZmV0Y2gnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB0ZXh0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJzxodG1sPjxzY3JpcHQgc3JjPVwiL3Rlc3QuMTIzLmpzXCI+PC9zY3JpcHQ+PC9odG1sPicpXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3Qgbm90aWZpZXIgPSBjcmVhdGVVcGRhdGVOb3RpZmllcih7XG4gICAgICBwb2xsaW5nSW50ZXJ2YWw6IDAsXG4gICAgICBvbkRldGVjdGVkOiBtb2NrT25EZXRlY3RlZFxuICAgIH0pO1xuICAgIFxuICAgIC8vIOesrOS4gOasoeiwg+eUqOS4jeS8muinpuWPkeabtOaWsO+8iOWIneWni+WMlu+8iVxuICAgIGF3YWl0IG5vdGlmaWVyLmNoZWNrTm93KCk7XG4gICAgXG4gICAgLy8g5qih5ouf5paw55qEc2NyaXB05YaF5a65XG4gICAgamVzdC5zcHlPbihnbG9iYWxUaGlzLCAnZmV0Y2gnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB0ZXh0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJzxodG1sPjxzY3JpcHQgc3JjPVwiL3Rlc3QuNDU2LmpzXCI+PC9zY3JpcHQ+PC9odG1sPicpXG4gICAgfSk7XG4gICAgXG4gICAgYXdhaXQgbm90aWZpZXIuY2hlY2tVcGRhdGUoKTtcbiAgICBcbiAgICBleHBlY3QobW9ja09uRGV0ZWN0ZWQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=